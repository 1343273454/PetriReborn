"DOTAAbilities"
{
	"building_queue"
	{
	  "BaseClass"                 "ability_datadriven"
	  "MaxLevel"            "1"
	
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_HIDDEN"
	
	  "Modifiers"
	  {
	    "modifier_building_queue"
	    {
	      "Passive"     "1"
	      "IsHidden"      "1"
	  
	      "ThinkInterval"  "0.03"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "buildings/queue.lua"
	          "Function"    "AdvanceQueue"
	        }
	      }
	    }
	
	    "modifier_grounded_passive"
	    {
	      "Passive"     "1"
	      "IsHidden"      "1"
	  
	      "States"
	      {
	        "MODIFIER_STATE_ROOTED"   "MODIFIER_STATE_VALUE_ENABLED"
	      }
	    }
	  }
	}
	"build_petri_exit"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_exit"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilitySpecial"
	  {
	    "01"
	    { 
	        "var_type"  "FIELD_INTEGER"
	        "lumber_cost" "99999"
	    }
	  }
	
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "600.0"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_exit"
	  "AbilityCooldown"       "480.0"
	  "AbilityGoldCost"       "5750"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  // Item Info
	  
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"build_petri_exploration_tree"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_exploration_tree"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "10.0"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_exploration_tree"
	  "AbilityCooldown"       "0"
	  "AbilityGoldCost"       "300"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  // Item Info
	  
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"build_petri_gold_tower"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_gold_tower"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilitySpecial"
	  {
	    "01"
	    { 
	        "var_type"  "FIELD_INTEGER"
	        "food_cost" "25"
	    }
	    "02"
	    { 
	        "var_type"  "FIELD_INTEGER"
	        "lumber_cost" "3250"
	    }
	  }
	
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "3.5"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_gold_tower"
	  "AbilityCooldown"       "0"
	  "AbilityGoldCost"       "0"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"build_petri_idol"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_idol"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilitySpecial"
	  {
	    "01"
	    { 
	        "var_type"  "FIELD_INTEGER"
	        "lumber_cost" "5000"
	    }
	  }
	
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "6.5"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_idol"
	  "AbilityCooldown"       "0"
	  "AbilityGoldCost"       "100"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  // Item Info
	  
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"build_petri_lab"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_lab"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilitySpecial"
	  {
	    "01"
	    { 
	        "var_type"  "FIELD_INTEGER"
	        "lumber_cost" "1500"
	    }
	  }
	
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "5.0"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_lab"
	  "AbilityCooldown"       "0"
	  "AbilityGoldCost"       "25"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  // Item Info
	  
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"build_petri_sawmill"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "npc_petri_sawmill"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "2.0"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_sawmill"
	  "AbilityCooldown"       "0"
	  "AbilityGoldCost"       "0"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  // Item Info
	  
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"build_petri_tent"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_tent"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "2.0"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_tent"
	  "AbilityCooldown"       "0"
	  "AbilityGoldCost"       "0"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  // Item Info
	  
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"build_petri_tower_basic"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_tower_basic"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilitySpecial"
	  {
	    "01"
	    { 
	        "var_type"  "FIELD_INTEGER"
	        "lumber_cost" "50"
	    }
	  }
	
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "2.0"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_tower_basic"
	  "AbilityCooldown"       "0"
	  "AbilityGoldCost"       "0"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  // Item Info
	  
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"build_petri_tower_of_evil"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_tower_of_evil"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "2.0"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_tower_of_evil"
	  "AbilityCooldown"       "0"
	  "AbilityGoldCost"       "350"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  // Item Info
	  
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"build_petri_wall"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_wall"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilitySpecial"
	  {
	    "01"
	    { 
	        "var_type"  "FIELD_INTEGER"
	        "lumber_cost" "150"
	    }
	  }
	
	  // BuildingHelper info
	  "Building"            "1" //bool
	  "BuildingSize"          "2" // this is (3x64) by (3x64) units, so 9 squares.
	  "BuildTime"           "3.0"
	  "AbilityCastRange"        "100"
	  "UpdateHealth"          "1" //bool
	  "Scale"             "1" //bool
	  "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
	  //"CancelsBuildingGhost"      "0" //bool
	  // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
	  "UnitName"            "npc_petri_wall"
	  "AbilityCooldown"       "0"
	  "AbilityGoldCost"       "0"
	  // End of BuildingHelper info
	
	  "AbilityCastPoint"        "0.0"
	  "MaxLevel"            "1"
	
	  
	  "AbilityManaCost"       "0"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "buildings/bh_abilities.lua"
	      "Function"        "build"
	    }
	  }
	}
	"gather_lumber"
	{
	  "BaseClass"                 "ability_datadriven"
	  "AbilityTextureName"      "gather_lumber"
	  "MaxLevel"            "1"
	
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
	  "AbilityUnitTargetTeam"     "DOTA_UNIT_TARGET_TEAM_BOTH"
	  "AbilityUnitTargetType"     "DOTA_UNIT_TARGET_TREE | DOTA_UNIT_TARGET_BUILDING"
	
	  "AbilityMultiOrder" "1"
	
	  "AbilityCastPoint"        "0.1"
	
	  "OnAbilityPhaseStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"  "units/peasant.lua"
	      "Function"    "Gather"
	    }
	    "ApplyModifier"
	    {
	      "Target"      "CASTER"
	      "ModifierName"    "modifier_ability_gather_lumber_no_col"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_ability_gather_lumber_no_col"
	    {
	      "Passive"         "1"
	      "IsHidden"          "1"
	      "IsBuff"          "1"
	      "IsDebuff"          "0"
	      "EffectAttachType"      "follow_origin"
	      
	      "States"
	      {
	        "MODIFIER_STATE_NO_UNIT_COLLISION"    "MODIFIER_STATE_VALUE_ENABLED"
	      }
	    }
	
	    "modifier_gathering_lumber"
	    {
	      "IsHidden"        "1"
	        
	      "ThinkInterval"  "0.03"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "CheckTreePosition"
	        }
	      }
	
	      "OnOrder"
	      {
	        "RemoveModifier"
	        {
	          "ModifierName"  "modifier_ability_gather_lumber_no_col"
	          "Target"    "CASTER"
	        }  
	
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "ToggleOffGather"
	          "arg" "modifier_gathering_lumber"
	        }
	      }
	      
	    }
	
	    "modifier_chopping_wood"
	    {
	      "IsHidden"        "1"
	    
	      "OverrideAnimation"   "ACT_DOTA_ATTACK"
	
	      "OnOrder"
	      { 
	        "RemoveModifier"
	        {
	          "ModifierName"  "modifier_ability_gather_lumber_no_col"
	          "Target"    "CASTER"
	        }    
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "ToggleOffGather"
	          "arg" "modifier_chopping_wood"
	        }
	      }
	
	      "ThinkInterval"  "1.0"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "Gather100Lumber"
	        }
	
	        "ApplyModifier"
	        {
	          "ModifierName"  "modifier_chopping_wood_animation"
	          "Target"    "CASTER"
	          "Duration"    "0.87"
	        }
	      }   
	    }
	
	    "modifier_chopping_wood_animation"
	    {
	      "OverrideAnimation"     "ACT_DOTA_ATTACK"
	      "IsHidden"        "1"
	      "OnOrder"
	      {
	        "RemoveModifier"
	        {
	          "ModifierName"  "modifier_ability_gather_lumber_no_col"
	          "Target"    "CASTER"
	        }  
	
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "ToggleOffGather"
	          "arg" "modifier_chopping_wood_animation"
	        }
	      }
	    }
	  }
	}
	// START OF BUILDING HELPER ABILITIES
	"has_build_queue"
	{
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_HIDDEN"
	  "BaseClass" "ability_datadriven"
	
	  "Modifiers"
	  {
	    "modifier_has_build_queue"
	    {
	      "Passive" "1"
	      "IsHidden"  "1"
	      "OnOrder"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "buildings/bh_abilities.lua"
	          "Function"    "builder_queue"
	        }
	      }
	    }
	  }
	}
	"move_to_point_100"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
	  "BaseClass"           "ability_datadriven"
	  "AbilityCastPoint"        "0"
	  "AbilityCooldown"       "0"
	  "AbilityCastRange"        "100"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  "MaxLevel"            "1"
	
	  "AbilityManaCost"       "0"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "Target"    "POINT"
	      "ScriptFile"  "buildings/bh_abilities.lua"
	      "Function"    "create_building_entity"
	    }
	  }
	}
	"move_to_point_150"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
	  "BaseClass"           "ability_datadriven"
	  "AbilityCastPoint"        "0"
	  "AbilityCooldown"       "0"
	  "AbilityCastRange"        "150"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  "MaxLevel"            "1"
	
	  "AbilityManaCost"       "0"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "Target"    "POINT"
	      "ScriptFile"  "buildings/bh_abilities.lua"
	      "Function"    "create_building_entity"
	    }
	  }
	}
	"move_to_point_200"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
	  "BaseClass"           "ability_datadriven"
	  "AbilityCastPoint"        "0"
	  "AbilityCooldown"       "0"
	  "AbilityCastRange"        "200"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  "MaxLevel"            "1"
	
	  "AbilityManaCost"       "0"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "Target"    "POINT"
	      "ScriptFile"  "buildings/bh_abilities.lua"
	      "Function"    "create_building_entity"
	    }
	  }
	}
	"move_to_point_250"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
	  "BaseClass"           "ability_datadriven"
	  "AbilityCastPoint"        "0"
	  "AbilityCooldown"       "0"
	  "AbilityCastRange"        "250"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  "MaxLevel"            "1"
	
	  "AbilityManaCost"       "0"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "Target"    "POINT"
	      "ScriptFile"  "buildings/bh_abilities.lua"
	      "Function"    "create_building_entity"
	    }
	  }
	}
	"move_to_point_300"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
	  "BaseClass"           "ability_datadriven"
	  "AbilityCastPoint"        "0"
	  "AbilityCooldown"       "0"
	  "AbilityCastRange"        "300"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  "MaxLevel"            "1"
	
	  "AbilityManaCost"       "0"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "Target"    "POINT"
	      "ScriptFile"  "buildings/bh_abilities.lua"
	      "Function"    "create_building_entity"
	    }
	  }
	}
	// END OF BUILDING HELPER ABILITIES
	"move_to_point_70"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
	  "BaseClass"           "ability_datadriven"
	  "AbilityCastPoint"        "0"
	  "AbilityCooldown"       "0"
	  "AbilityCastRange"        "70"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  "MaxLevel"            "1"
	
	  "AbilityManaCost"       "0"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "Target"    "POINT"
	      "ScriptFile"  "buildings/bh_abilities.lua"
	      "Function"    "create_building_entity"
	    }
	  }
	}
	"petri_building"
	{
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_HIDDEN"
	  "BaseClass"           "ability_datadriven"
	  "MaxLevel" "1"
	  "AbilityTextureName"      ""
	  
	  "Modifiers"
	  {
	    "modifier_building"
	    {
	      "Passive"     "1"
	      "IsHidden"      "1"
	      "Attributes" "MODIFIER_ATTRIBUTE_IGNORE_INVULNERABLE | MODIFIER_ATTRIBUTE_PERMANENT"  
	      "States"
	      {
	        "MODIFIER_STATE_MAGIC_IMMUNE" "MODIFIER_STATE_VALUE_ENABLED" // Makes most abilities don't affect this. Use custom damage
	        "MODIFIER_STATE_ROOTED"   "MODIFIER_STATE_VALUE_ENABLED" // Prevents moving
	        //"MODIFIER_STATE_SPECIALLY_DENIABLE" "MODIFIER_STATE_VALUE_ENABLED" // Allows attacking own buildings
	        "MODIFIER_STATE_LOW_ATTACK_PRIORITY" "MODIFIER_STATE_VALUE_ENABLED" // Makes it a secondary target when A-clicking ground
	        "MODIFIER_STATE_NO_UNIT_COLLISION"  "MODIFIER_STATE_VALUE_ENABLED" // GridNav is blocked
	      }
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_DISABLE_TURNING" "1"
	        "MODIFIER_PROPERTY_IGNORE_CAST_ANGLE" "1"
	        "MODIFIER_PROPERTY_MOVESPEED_ABSOLUTE" "0.1"
	      }
	    }
	  }
	}
	"petri_buy_lumber"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_buy_lumber"
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityCooldown" "0.1"
	
	  "AbilityGoldCost" "125"
	
	  "MaxLevel"            "1"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber"      "10000"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/sawmill.lua"
	      "Function"        "BuyLumber"
	    }
	  }
	}
	"petri_empty1"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
	  "MaxLevel"            "0"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"            "rubick_empty1" 
	
	  "IsHidden"         "1"
	}
	"petri_empty2"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
	  "MaxLevel"            "0"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"            "rubick_empty1"
	  "IsHidden"         "1"
	}
	"petri_empty3"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
	  "MaxLevel"            "0"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"            "rubick_empty1"
	  "IsHidden"         "1"
	}
	"petri_empty4"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
	  "MaxLevel"            "0"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"            "rubick_empty1"
	  "IsHidden"         "1"
	}
	"petri_empty5"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
	  "MaxLevel"            "0"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"            "rubick_empty1"
	  "IsHidden"         "1"
	}
	"petri_empty6"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
	  "MaxLevel"            "0"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"            "rubick_empty1"
	  "IsHidden"         "1"
	}
	"petri_exit"
	{
	  "BaseClass" "ability_datadriven"
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_HIDDEN"
	  "AbilityTextureName" "build_petri_exit"
	
	  "Modifiers"
	  {
	    "modifier_exit"
	    {
	      "Passive"      "1"
	      "IsHidden"      "1"
	
	      "OnCreated"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "gamemode.lua"
	          "Function"    "KVNWin"
	        }
	      }
	    }
	  }
	}
	"petri_exploration_tower_explore_world"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_exploration_tree_explore"
	
	  "AbilitySharedWithTeammates" "1"
	
	  "AbilityGoldCost"       "500"
	  "AbilityCooldown"       "25"
	
	  "MaxLevel"            "1"
	
	  "precache"
	  {
	    "particle"    "particles/units/heroes/hero_rattletrap/clock_loadout_sparks.vpcf"
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/exploration_tower.lua"
	      "Function"        "ExploreWorld"
	    }
	  }
	}
	"petri_exploration_tree_explore"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_exploration_tree_explore"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityManaCost"       "50"
	
	  "MaxLevel"            "1"
	
	  "precache"
	  {
	    "particle"    "particles/items_fx/dust_of_appearance.vpcf"
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/exploration_tree.lua"
	      "Function"        "Explore"
	      "Target"    "POINT"
	    }
	  }
	}
	"petri_get_gold"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL | DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_DONT_RESUME_ATTACK | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "alchemist_goblins_greed"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityCooldown" "10 9 8 8 8 7 6 5 4"
	
	  "MaxLevel"            "9"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "gold"      "1 2 4 5 6 7 10 12 14"
	    }
	  }
	
	  "OnUpgrade"
	  {
	    "ApplyModifier"
	    {
	      "Target"       "CASTER"
	      "ModifierName" "modifier_get_gold_autocast"
	    }
	  }
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/gold_tower.lua"
	      "Function"        "GetGold"
	      "gold" "%gold"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_get_gold_autocast"
	    {
	      "IsHidden"  "1"
	
	      "OnCreated"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "units/gold_tower.lua"
	          "Function"      "GetGoldAutocast"
	        }
	      }
	
	      "ThinkInterval" "1.03" // Bad solution
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "units/gold_tower.lua"
	          "Function"      "GetGoldAutocast"
	        }
	      }
	    }
	  }
	}
	"petri_gold_bag_get_gold"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL | DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_DONT_RESUME_ATTACK | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "alchemist_goblins_greed"
	
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  "AbilityCastPoint"        "0.0"
	  "AbilityCooldown"        "5.725"
	
	  "MaxLevel"            "1"
	
	  "OnUpgrade"
	  {
	    "ApplyModifier"
	    {
	      "Target"       "CASTER"
	      "ModifierName" "modifier_gold_bag_get_gold_autocast"
	    }
	  }
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/gold_bag.lua"
	      "Function"        "GetGold"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_gold_bag_get_gold_autocast"
	    {
	      "IsHidden"  "1"
	
	      "OnCreated"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "units/gold_bag.lua"
	          "Function"      "GetGoldAutocast"
	        }
	      }
	
	      "ThinkInterval" "5.75" // whatever
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "units/gold_bag.lua"
	          "Function"      "GetGoldAutocast"
	        }
	      }
	    }
	  }
	}
	
	"petri_upgrade_gold_bag"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_gold_tower"
	
	  "AbilityCastAnimation"      "ACT_DOTA_IDLE"
	  "AbilityCastPoint"        "0.0"
	
	  "MaxLevel"            "1"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"      "FIELD_INTEGER"
	      "upgrade_rate"      "74"
	    }
	    "02"
	    {
	      "var_type"      "FIELD_INTEGER"
	      "upgrade_limit"      "295"
	    }
	  }
	
	  "OnUpgrade"
	  {
	    "ApplyModifier"
	    {
	      "Target"       "CASTER"
	      "ModifierName" "modifier_gold_bag"
	    }
	  }
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/gold_bag.lua"
	      "Function"        "ToggleUpgrading"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_gold_bag"
	    {
	      "IsHidden"  "0"
	      "Passive"   "1"
	    }
	
	    "modifier_gold_bag_upgrading_autocast"
	    {
	      "IsHidden"  "1"
	
	      "OnCreated"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "units/gold_bag.lua"
	          "Function"      "Upgrade"
	        }
	      }
	
	      "ThinkInterval" "1.0"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "units/gold_bag.lua"
	          "Function"      "Upgrade"
	        }
	      }
	    }
	  }
	}
	
	"petri_gold_bag_blink"
	{
	  "BaseClass"       "ability_datadriven"
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
	  "AbilityTextureName"      "antimage_blink"
	
	  "MaxLevel" "1"
	
	  "precache"
	  {
	    "soundfile"   "soundevents/game_sounds_heroes/game_sounds_antimage.vsndevts"
	  }
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityCooldown"       "5.0"
	  
	  "AbilityManaCost"       "0"
	  
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"        "FIELD_INTEGER"
	      "blink_range"     "2150"
	    }
	    
	    "02"
	    {
	      "var_type"        "FIELD_INTEGER"
	      "min_blink_range"   "200"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"  "items/dagger.lua"
	      "Function"    "Blink"
	      "Target"    "POINT"
	    }
	
	    "FireSound"
	    {
	      "EffectName"  "Hero_Antimage.Blink_out"
	      "Target"    "CASTER"
	    }
	
	    "FireSound"
	    {
	      "EffectName"  "Hero_Antimage.Blink_in"
	      "Target"    "CASTER"
	    }
	  }
	}
	"petri_dummy_invisibility"
	{
	  "BaseClass" "ability_datadriven"
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE"
	  "AbilityUnitTargetTeam" "DOTA_UNIT_TARGET_TEAM_ALLY"
	  "AbilityUnitTargetType" "DOTA_UNIT_TARGET_ALL"
	  "AbilityTextureName" "undying_tombstone"
	  
	  "Modifiers"
	  {
	    "unit_properties"
	    {
	      "Passive" "1"
	      
	      "States"
	      {
	        "MODIFIER_STATE_INVULNERABLE"           "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_UNSELECTABLE"           "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NO_HEALTH_BAR"            "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NO_UNIT_COLLISION"          "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NO_TEAM_SELECT"           "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_ATTACK_IMMUNE"            "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_FLYING_FOR_PATHING_PURPOSES_ONLY"   "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NOT_ON_MINIMAP"           "MODIFIER_STATE_VALUE_ENABLED"
	      }
	    } 
	    "modifier_truesight_datadriven"
	    {
	      "Passive"     "1"
	      "IsHidden"      "1"
	  
	      "ThinkInterval"  "0.03"
	      "OnIntervalThink"
	      {
	        "ActOnTargets"
	        {
	          "Target"
	          {
	            "Center"    "TARGET"
	            "Radius"  "1800"
	            "Teams"   "DOTA_UNIT_TARGET_TEAM_ENEMY"
	            "Types"   "DOTA_UNIT_TARGET_ALL"
	          }
	        
	          "Action"    
	          {
	            "RemoveModifier"
	            {
	              "ModifierName"  "modifier_truesight_reveal"
	              "Target"    "TARGET"
	            }
	
	            "ApplyModifier"
	            {
	              "ModifierName"  "modifier_truesight_reveal"
	              "Target"    "TARGET"
	            }
	          }
	        }     
	      }   
	    }
	
	    "modifier_truesight_reveal"
	    {
	      "IsHidden"      "1"
	      "Duration"      "0.5"
	      "Priority"                     "MODIFIER_PRIORITY_ULTRA"
	
	      "States"
	      {
	        "MODIFIER_STATE_INVISIBLE"  "MODIFIER_STATE_VALUE_DISABLED"
	      }
	    }
	  }   
	}
	
	"petri_janitor_invisibility"
	{
	  "BaseClass" "ability_datadriven"
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_HIDDEN"
	  "AbilityTextureName" "riki_permanent_invisibility"
	  
	  "Modifiers"
	  {
	    "modifier_janitor_invisibility"
	    {
	      "IsHidden"      "1"
	      "Passive"      "1"
	      "Priority"                     "MODIFIER_PRIORITY_ULTRA"
	
	      "States"
	      {
	        "MODIFIER_STATE_TRUESIGHT_IMMUNE" "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_INVISIBLE"  "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_PROPERTY_PERSISTENT_INVISIBILITY"           "MODIFIER_STATE_VALUE_ENABLED"
	      }
	    }
	  }  
	}
	
	"petri_invisibility"
	{
	  "BaseClass" "ability_datadriven"
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_HIDDEN"
	  "AbilityTextureName" "riki_permanent_invisibility"
	  
	  "Modifiers"
	  {
	    "modifier_invisibility"
	    {
	      "Passive" "1"
	      "IsHidden"      "1"
	      "Attributes"    "MODIFIER_ATTRIBUTE_MULTIPLE"
	
	      "OnCreated"
	      {
	        "ApplyModifier"
	        {
	          "ModifierName" "modifier_invisible"
	          "Target" "CASTER" 
	        }
	      } 
	    }
	  }  
	}
	
	"petri_dummy_portal_icon_passive"
	{
	  "BaseClass" "ability_datadriven"
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE"
	  "AbilityTextureName" "riki_permanent_invisibility"
	  
	  "Modifiers"
	  {
	    "modifier_invisibility"
	    {
	      "Passive" "1"
	      "IsHidden"      "1"
	      "Attributes"    "MODIFIER_ATTRIBUTE_MULTIPLE"
	
	      "States"
	      {
	        "MODIFIER_STATE_INVULNERABLE"           "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_UNSELECTABLE"           "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NO_HEALTH_BAR"            "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NO_UNIT_COLLISION"          "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NO_TEAM_SELECT"           "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_ATTACK_IMMUNE"            "MODIFIER_STATE_VALUE_ENABLED"
	      }
	    }
	  }  
	}
	"petri_janitor_take_items_from_stash"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityCastPoint"        "0"
	  "AbilityCooldown"       "0"
	  "AbilityCastRange"        "100"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  "MaxLevel"            "1"
	
	  "AbilityTextureName"      "courier_take_stash_items"
	
	  "AbilityManaCost"       "0"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"  "units/janitor.lua"
	      "Function"    "TakeItemsFromStash"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_on_order_cancel"
	    {
	      "IsHidden"        "1"
	      "OnOrder"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/janitor.lua"
	          "Function"    "CancelTransferItems"
	        }
	      }
	    }
	  }
	}
	"petri_janitor_transfer_items"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityCastPoint"        "0"
	  "AbilityCooldown"       "0"
	  "AbilityCastRange"        "100"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	  "MaxLevel"            "1"
	
	  "AbilityTextureName"      "courier_transfer_items"
	
	  "AbilityManaCost"       "0"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"  "units/janitor.lua"
	      "Function"    "TransferItems"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_on_order_cancel"
	    {
	      "IsHidden"        "1"
	      "OnOrder"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/janitor.lua"
	          "Function"    "CancelTransferItems"
	        }
	      }
	    }
	  }
	}
	"petri_open_basic_buildings_menu"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_kvn_fan_open_basic_buildings_menu"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "MaxLevel"            "1"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/kvn_fan.lua"
	      "Function"        "OpenBasicBuildingsMenu"
	    }
	  } 
	}
	
	"petri_open_advanced_buildings_menu"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_kvn_fan_open_advanced_buildings_menu"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "MaxLevel"            "1"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/kvn_fan.lua"
	      "Function"        "OpenAdvancedBuildingsMenu"
	    }
	  }
	}
	
	"petri_close_basic_buildings_menu"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_kvn_fan_close_buildings_menu"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "MaxLevel"            "1"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/kvn_fan.lua"
	      "Function"        "CloseBasicBuildingsMenu"
	    }
	  }
	}
	
	"petri_close_advanced_buildings_menu"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_kvn_fan_close_buildings_menu"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "MaxLevel"            "1"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/kvn_fan.lua"
	      "Function"        "CloseAdvancedBuildingsMenu"
	    }
	  }
	}
	"petri_kvn_fan_deny"
	{
	  "BaseClass"           "ability_datadriven"
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
	  "AbilityUnitTargetTeam"     "DOTA_UNIT_TARGET_TEAM_FRIENDLY"
	  "AbilityUnitTargetType"     "DOTA_UNIT_TARGET_ALL"
	  "AbilityTextureName"      "techies_suicide"
	
	  "AbilityCastRange" "150"
	
	  "AbilityCooldown" "0.1"
	
	  "MaxLevel"            "1"
	
	  "precache"
	  {
	    "particle"    "particles/units/heroes/hero_techies/techies_suicide_base.vpcf"
	  }
	
	  "OnSpellStart"
	  {
	    "FireEffect"
	    {
	      "EffectName"        "particles/units/heroes/hero_techies/techies_suicide_base.vpcf"
	      "EffectAttachType"  "follow_origin"
	      "Target"            "TARGET"
	    }
	    "RunScript"
	    {
	      "ScriptFile"  "units/kvn_fan.lua"
	      "Function"    "Deny"
	    }
	  }
	}
	"petri_magic_immune"
	{
	  "BaseClass" "ability_datadriven"
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_HIDDEN"
	  "AbilityTextureName" "riki_permanent_invisibility"
	  
	  "Modifiers"
	  {
	    "modifier_magic_immune"
	    {
	      "IsHidden"      "1"
	      "Passive"      "1"
	      "Priority"                     "MODIFIER_PRIORITY_ULTRA"
	
	      "States"
	      {
	        "MODIFIER_STATE_MAGIC_IMMUNE"           "MODIFIER_STATE_VALUE_ENABLED"
	      }
	    }
	  }  
	}
	"petri_make_a_bet"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_make_a_bet"
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityCooldown" "0.1"
	
	  "AbilityGoldCost" "100"
	
	  "MaxLevel"            "1"
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/sawmill.lua"
	      "Function"        "MakeABet"
	    }
	  }
	}
	"petri_petrosyan_explore"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_exploration_tree_explore"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityManaCost"       "10 40 70 150"
	  "AbilityCooldown"       "30 25 20 15"
	
	  "MaxLevel"            "4"
	
	  "precache"
	  {
	    "particle"  "particles/items_fx/dust_of_appearance.vpcf"
	    "soundfile" "soundevents/game_sounds_heroes/game_sounds_magnataur.vsndevts"
	  }
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"        "FIELD_INTEGER"
	      "reveal_radius"          "600 1000 1400 1800"
	    }
	    "02"
	    {
	      "var_type"    "FIELD_INTEGER"
	      "duration"    "5 6 7 8"
	    }
	  }
	
	  "precache"
	  {
	    "particle"    "particles/units/heroes/hero_rattletrap/clock_loadout_sparks.vpcf"
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/petrosyan.lua"
	      "Function"        "FarSight"
	      "Target"    "POINT"
	    }
	  }
	}
	"petri_petrosyan_flat_joke"
	{
		"BaseClass"				"ability_datadriven"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_PASSIVE"
		"AbilityTextureName"			"death_prophet_carrion_swarm"
	
		"MaxLevel" "1"
	
		"precache"
		{	
			"particle"		"particles/petri_flat_joke.vpcf"
		}
	
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"					"FIELD_INTEGER"
				"joke_damage"				"1"
			}
			"02"
			{
				"var_type"					"FIELD_INTEGER"
				"crit_chance"				"10"
			}
		}
	
		"Modifiers"
		{
			"modifier_flat_joke_datadriven"
			{
		    "Passive"   "1"
		    "IsHidden"  "1"
	
		    "OnAttackStart"
		    {
	        "Random"
	        {
	          "Chance" 	"%crit_chance"
	          "OnSuccess"
	          {
			        "LinearProjectile"
							{
						    "Target"		 	"ATTACKER"
						    "EffectName"     	"particles/petri_flat_joke.vpcf"
						    "MoveSpeed"      	"1100"
						    "StartRadius"    	"110"
						    "EndRadius"      	"300"
						    "StartPosition"  	"follow_origin"
						    "FixedDistance"  	"1000"
						    "TargetTeams"    	"DOTA_UNIT_TARGET_TEAM_ENEMY"
						    "TargetTypes"    	"DOTA_UNIT_TARGET_ALL"
						    "HasFrontalCone" 	"1"
						    "ProvidesVision" 	"0"
							}     
	          }
	        }
		    }
			}
		}
	
		"OnProjectileHitUnit"
		{
			"DeleteOnHit"	"0"
	
			"Damage"
			{
				"Target"		 "TARGET"
				"Type"			 "DAMAGE_TYPE_MAGICAL"
				"Damage"		 "1"
	    }
		}
	}
	"petri_petrosyan_laugh_burst"
	{
	  "BaseClass"       "ability_datadriven"
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
	  "AbilityUnitTargetTeam"     "DOTA_UNIT_TARGET_TEAM_FRIENDLY"
	  "AbilityUnitTargetType"     "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_MECHANICAL"
	  //"AbilityUnitTargetFlags"    "DOTA_UNIT_TARGET_FLAG_NOT_MAGIC_IMMUNE_ALLIES"
	  "AbilityTextureName"      "omniknight_purification"
	
	  "AbilityCastRange"        "700"
	  "AbilityCastPoint"        "0.5"
	
	  "AbilityCooldown"       "15.0"
	
	  "AbilityManaCost"       "1 2 3 4 5 6 10 15 18 25 35 50 70 85 100 125 250 400"
	
	  "MaxLevel"            "15"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"        "FIELD_INTEGER"
	      "heal"          "10 20 35 50 75 125 200 300 500 1000 1250 1500 2000 2800 5000 7500 10000 13000"
	    }
	  }
	
	  "precache"
	  {
	    "soundfile" "soundevents/game_sounds_heroes/game_sounds_omniknight.vsndevts"
	    "particle"  "particles/units/heroes/hero_omniknight/omniknight_purification.vpcf"
	    "particle"  "particles/units/heroes/hero_omniknight/omniknight_purification_hit.vpcf"
	    "particle"  "particles/units/heroes/hero_omniknight/omniknight_purification_cast.vpcf"
	
	  }
	
	  "OnSpellStart"
	  {
	    "FireSound"
	    {
	      "EffectName"  "Hero_Omniknight.Purification"
	      "Target"    "TARGET"
	    }
	    
	    "FireEffect"
	    {
	      "Target"      "TARGET"
	      "EffectName"    "particles/units/heroes/hero_omniknight/omniknight_purification_cast.vpcf"
	      "EffectAttachType"  "follow_origin"
	    }
	
	    "Heal"
	    {
	      "Target"    "TARGET"
	      "HealAmount"  "%heal"
	    }
	  }
	}
	"petri_petrosyan_return"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL | DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_DONT_RESUME_ATTACK | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "keeper_of_the_light_illuminate_end"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityCooldown" "5.5"
	
	  "MaxLevel"            "1"
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/petrosyan.lua"
	      "Function"        "Return"    
	    }
	  }
	}
	"petri_petrosyan_sleep"
	{
	  "BaseClass" "ability_datadriven"
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
	  "AbilityUnitTargetTeam" "DOTA_UNIT_TARGET_TEAM_ENEMY"
	  "AbilityUnitTargetType" "DOTA_UNIT_TARGET_HERO"
	  "AbilityTextureName" "petri_sleep"
	
	  "MaxLevel" "15"
	
	  "AbilityCastRange"        "650"
	
	  "AbilityCooldown"       "11 13 15 17 19 21 23 25 27 29 31 32 33 34 35"
	
	  "AbilityManaCost" "1 2 3 4 5 6 7 8 9 10 11 12 13 14 15" 
	
	  "precache"
	  {
	    "particle"    "particles/generic_gameplay/generic_sleep.vpcf"
	  }
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "duration"      "5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"  "units/petrosyan.lua"
	      "Function"    "Sleep"
	    }
	    "ApplyModifier"
	    {
	      "ModifierName"  "sleep_modifier"
	      "Target"    "TARGET"
	    }
	  }
	  
	  "Modifiers"
	  {
	    "sleep_modifier"
	    {
	      "Duration"  "%duration"
	      "IsDebuff"  "1"
	
	      "EffectName"        "particles/generic_gameplay/generic_sleep.vpcf"
	      "EffectAttachType"      "follow_overhead"
	
	      "States"
	      {
	        "MODIFIER_STATE_ROOTED" "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_FROZEN" "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NIGHTMARED"         "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_LOW_ATTACK_PRIORITY"  "MODIFIER_STATE_VALUE_ENABLED" 
	        "MODIFIER_STATE_STUNNED" "MODIFIER_STATE_VALUE_ENABLED" 
	        "MODIFIER_STATE_INVULNERABLE" "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NO_HEALTH_BAR"  "MODIFIER_STATE_VALUE_ENABLED"   
	      }
	    } 
	  }   
	}
	
	"petri_petrosyan_dummy_sleep"
	{
	  "BaseClass" "ability_datadriven"
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE"
	
	  "MaxLevel" "1"
	
	  "precache"
	  {
	    "particle"    "particles/generic_gameplay/generic_sleep.vpcf"
	  }
	
	  "OnUpgrade"
	  {
	    "ApplyModifier"
	    {
	      "ModifierName"  "dummy_sleep_modifier"
	      "Target"    "CASTER"
	    }
	  }
	  
	  "Modifiers"
	  {
	    "dummy_sleep_modifier"
	    {
	      "Duration"  "30"
	      "IsDebuff"  "1"
	
	      "EffectName"        "particles/generic_gameplay/generic_sleep.vpcf"
	      "EffectAttachType"      "follow_overhead"
	
	      "States"
	      {
	        "MODIFIER_STATE_NIGHTMARED"         "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_STUNNED"            "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_SPECIALLY_DENIABLE"   "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_LOW_ATTACK_PRIORITY"  "MODIFIER_STATE_VALUE_ENABLED" 
	
	        "MODIFIER_STATE_INVULNERABLE" "MODIFIER_STATE_VALUE_ENABLED"
	        "MODIFIER_STATE_NO_HEALTH_BAR"  "MODIFIER_STATE_VALUE_ENABLED"   
	      }
	
	      "OnDestroy"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/petrosyan.lua"
	          "Function"    "OnAwake"
	        }
	      }
	    } 
	  }   
	}
	"petri_petrosyan_wind_walk"
	{
	  "BaseClass"       "ability_datadriven"
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL"
	  "AbilityTextureName"      "clinkz_wind_walk"
	
	  "AbilityCooldown"       "25.0"
	
	  "AbilityManaCost"       "1 2 3 4 5 6 7 8 10 12 14 16 20 25 30 35 40"
	
	  "MaxLevel"            "15"
	  
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "duration"          "10 20 30 40 50 60 70 80 90 100 110 120 130 140 150"
	    }
	  }
	
	  "precache"
	  {
	    "particle"  "particles/units/heroes/hero_clinkz/clinkz_windwalk.vpcf"
	  }
	
	  "OnSpellStart"
	  {
	    "FireEffect"
	    {
	      "EffectName"    "particles/units/heroes/hero_clinkz/clinkz_windwalk.vpcf"
	      "EffectAttachType"  "attach_origin"
	      "Target"      "CASTER"
	    }
	
	    "ApplyModifier"
	    {
	      "Target"    "CASTER"
	      "ModifierName"  "modifier_wind_walk_fade"
	      "Duration"    "%fade_time"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_wind_walk_fade"
	    {
	      "IsHidden"      "1"
	      "EffectName"    "particles/generic_hero_status/status_invisibility_start.vpcf"
	      "EffectAttachType"  "follow_origin"
	
	      "OnDestroy"
	      {
	        "ApplyModifier"
	        {
	          "Target"    "CASTER"
	          "ModifierName"  "modifier_wind_walk"
	          "Duration"    "%duration"
	        }
	        "ApplyModifier"
	        {
	          "Target"    "CASTER"
	          "ModifierName"  "modifier_invisible"
	          "Duration"    "%duration"
	        }
	      }
	    }
	
	    "modifier_wind_walk"
	    {
	      "OnAttackLanded"
	      {
	        "RemoveModifier"
	        {
	          "Target"    "CASTER"
	          "ModifierName"  "modifier_wind_walk"
	        }
	        "RemoveModifier"
	        {
	          "Target"    "CASTER"
	          "ModifierName"  "modifier_invisible"
	        }
	      }
	
	      "OnAbilityExecuted"
	      {
	        "RemoveModifier"
	        {
	          "Target"    "CASTER"
	          "ModifierName"  "modifier_wind_walk"
	        }
	        "RemoveModifier"
	        {
	          "Target"    "CASTER"
	          "ModifierName"  "modifier_invisible"
	        }
	      }
	
	      "States"
	      {
	        "MODIFIER_STATE_INVISIBLE"  "MODIFIER_STATE_VALUE_ENABLED" 
	      }
	
	      "OnDestroy"
	      {
	        "RemoveModifier"
	        {
	          "Target"
	          {
	            "Center"  "CASTER"
	            "Flags"   "DOTA_UNIT_TARGET_FLAG_DEAD"
	          }
	          "ModifierName"  "modifier_invisible"
	        }
	      }
	    }
	  }
	}
	"petri_repair"
	{
	  "BaseClass"                 "ability_datadriven"
	  "AbilityTextureName"      "petri_repair"
	  "MaxLevel"            "1"
	
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET | DOTA_ABILITY_BEHAVIOR_AUTOCAST"
	  "AbilityUnitTargetTeam"     "DOTA_UNIT_TARGET_TEAM_FRIENDLY"
	  "AbilityUnitTargetType"     "DOTA_UNIT_TARGET_ALL"
	
	  "AbilityMultiOrder" "1"
	
	  "OnAbilityPhaseStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"  "units/peasant.lua"
	      "Function"    "StartRepairing"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_repairing_autocast_aura"
	    {
	      "Passive" "1"
	      "IsHidden"  "1"
	
	      "OnCreated"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "units/peasant.lua"
	          "Function"      "RepairingAutocast"
	        }
	      }
	
	      "ThinkInterval" "3"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "units/peasant.lua"
	          "Function"      "RepairingAutocast"
	        }
	      }
	    }
	
	    "modifier_repairing"
	    {
	      "IsHidden"        "1"
	        
	      "ThinkInterval"  "0.03"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "CheckRepairingTargetPosition"
	        }
	      }
	
	      "OnOrder"
	      {
	        "RemoveModifier"
	        {
	          "ModifierName"  "modifier_repairing"
	          "Target"    "CASTER"
	        }
	
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "ToggleOffRepairing"
	        }
	      }
	    }
	
	    "modifier_chopping_building"
	    {
	      "IsHidden"        "1"
	    
	      "OverrideAnimation"   "ACT_DOTA_ATTACK"
	
	      "OnOrder"
	      {     
	        "RemoveModifier"
	        {
	          "ModifierName"  "modifier_chopping_building"
	          "Target"    "CASTER"
	        }
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "ToggleOffRepairing"
	        }
	      }
	
	      "ThinkInterval"  "1.0"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "RepairBy1Percent"
	        }
	
	        "ApplyModifier"
	        {
	          "ModifierName"  "modifier_chopping_building_animation"
	          "Target"    "CASTER"
	          "Duration"    "0.87"
	        }
	      }   
	    }
	
	    "modifier_chopping_building_animation"
	    {
	      "OverrideAnimation"     "ACT_DOTA_ATTACK"
	      "IsHidden"        "1"
	      "OnOrder"
	      {
	        "RemoveModifier"
	        {
	          "ModifierName"  "modifier_chopping_building_animation"
	          "Target"    "CASTER"
	        }
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "ToggleOffRepairing"
	        }
	      }
	    }
	
	    "modifier_being_repaired"
	    {
	      "IsHidden"  "1"
	    }
	  }
	}
	"petri_suicide"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "techies_suicide"
	  "AbilityCastAnimation"      "ACT_DOTA_DEATH"
	
	  "MaxLevel"            "1"
	
	  "precache"
	  {
	    "particle"    "particles/units/heroes/hero_techies/techies_suicide_base.vpcf"
	  }
	
	  "OnSpellStart"
	  {
	    "FireEffect"
	    {
	      "EffectName"        "particles/units/heroes/hero_techies/techies_suicide_base.vpcf"
	      "EffectAttachType"  "follow_origin"
	      "Target"            "CASTER"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "units/peasant.lua"
	      "Function"        "Suicide"
	    }
	  }
	}
	"petri_trap"
	{
	  "BaseClass" "ability_datadriven"
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE"
	  "AbilityUnitTargetTeam" "DOTA_UNIT_TARGET_TEAM_ENEMY"
	  "AbilityUnitTargetType" "DOTA_UNIT_TARGET_HERO"
	  "AbilityTextureName" "techies_stasis_trap"
	  
	  "Modifiers"
	  {
	    "modifier_trap"
	    {
	      "Passive"     "1"
	      "IsHidden"      "1"
	  
	      "ThinkInterval"  "0.03"
	      "OnIntervalThink"
	      {
	        "ActOnTargets"
	        {
	          "Target"
	          {
	            "Center"    "TARGET"
	            "Radius"  "100"
	            "Teams"   "DOTA_UNIT_TARGET_TEAM_ENEMY"
	            "Types"   "DOTA_UNIT_TARGET_HERO"
	          }
	          
	          "Action"
	          {
	            "RunScript"
	            {
	              "ScriptFile"  "units/trap.lua"
	              "Function"    "AddTrap"
	              "Target"  "TARGET"
	            }
	            "RemoveModifier"
	            {
	              "ModifierName"  "modifier_trap"
	              "Target"     "CASTER"
	            }
	          }      
	        }     
	      }   
	    }
	  }   
	}
	"petri_upgrade"
	{
	  "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_HIDDEN"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      ""
	  
	  "Modifiers"
	  {
	    "modifier_upgrade"
	    {
	      "Passive"     "1"
	      "Attributes"    "MODIFIER_ATTRIBUTE_IGNORE_INVULNERABLE"  
	    }
	  }
	}
	"petri_upgrade_basic_tower"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_basic_tower"
	
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "MaxLevel"            "8"
	
	  "AbilityChannelTime"      "1.0 2.0 3.0 4.0 5.0 6.0 8.0"
	  "AbilityGoldCost"       "0 0 1 5 10 20 40"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "500 1500 4500 10000 17000 21000 28000"
	    }
	    "02"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack"        "14 25 67 99 140 200 400"
	    }
	    "03"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack_rate"        "20 40 50 60 70 90 120"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/tower.lua"
	      "Function"        "UpgradeBasic"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_attack_speed"
	    {
	      "Passive"  "0"
	      "IsHidden" "1"
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"    "%attack_rate"
	      }
	    }
	  }
	}
	
	"petri_upgrade_elements_tower"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_elements_tower"
	
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "MaxLevel"            "2"
	
	  "AbilityChannelTime"      "2.0"
	  "AbilityGoldCost"       "0"
	
	  "precache"
	  {
	    "particle"  "particles/units/heroes/hero_razor/razor_static_link_projectile_a.vpcf"
	  }
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "1500"
	    }
	    "02"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack"        "16"
	    }
	    "03"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack_rate"        "20"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/tower.lua"
	      "Function"        "UpgradeElements"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_attack_speed"
	    {
	      "Passive"  "0"
	      "IsHidden" "1"
	
	      "Orb"
	      {
	        "Priority"        "DOTA_ORB_PRIORITY_ITEM"
	        "ProjectileName"    "particles/units/heroes/hero_razor/razor_static_link_projectile_a.vpcf"
	        "CastAttack"      "0"
	      }
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"    "%attack_rate"
	      }
	    }
	  }
	}
	
	"petri_upgrade_fire_tower"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_fire_tower"
	
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "MaxLevel"            "8"
	
	  "AbilityChannelTime"      "2.0 2.1 2.2 2.3 2.4 2.5 2.6"
	  "AbilityGoldCost"       "0 0 2 10 20 30 40"
	
	  "precache"
	  {
	    "particle"  "particles/units/heroes/hero_invoker/invoker_forged_spirit_projectile.vpcf"
	  }
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "2000 5000 10000 17000 20000 25000 34000"
	    }
	    "02"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack"        "55 91 180 210 240 260 350"
	    }
	    "03"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack_rate"        "10 15 20 30 40 50 60"
	    }
	    "04"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "chance"        "20 20 20 20 20 20 20"
	    }
	    "05"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "crit"        "300 300 300 300 300 300 300"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/tower.lua"
	      "Function"        "UpgradeFire"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_attack_speed"
	    {
	      "Passive"  "0"
	      "IsHidden" "1"
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"    "%attack_rate"
	      }
	    }
	    "modifier_crits"
	    {
	      "Passive"  "0"
	
	      "IsHidden"   "1"
	
	      "Orb"
	      {
	        "Priority"        "DOTA_ORB_PRIORITY_ITEM"
	        "ProjectileName"    "particles/units/heroes/hero_invoker/invoker_forged_spirit_projectile.vpcf"
	        "CastAttack"      "0"
	      }
	
	      "OnAttackStart"
	      {
	        "Random"
	        {
	          "Chance" "%chance"
	          "OnSuccess"
	          {
	            "ApplyModifier"
	            {
	              "ModifierName" "creep_crit"
	              "Target"     "CASTER" 
	            }   
	          }
	        }
	      }
	    }
	    "creep_crit"
	    {
	      "Duration"  "1"
	      "IsHidden"  "1"
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_PREATTACK_CRITICALSTRIKE"   "%crit"
	      }
	      
	      "OnAttackLanded"
	      { 
	        "RemoveModifier"
	        {
	          "ModifierName"    "creep_crit"
	          "Target"      "CASTER"  
	        }
	      }
	    }
	  }
	}
	
	"petri_upgrade_ice_tower"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_ice_tower"
	
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "MaxLevel"            "8"
	
	  "AbilityChannelTime"      "2.0 2.1 2.2 2.3 2.4 2.5 2.6"
	  "AbilityGoldCost"       "0 1 5 10 15 20 25"
	
	  "precache"
	  {
	    "particle"  "particles/status_fx/status_effect_frost.vpcf"
	    "particle"  "particles/items2_fx/skadi_projectile.vpcf"
	  }
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "1000 2500 7000 11000 15000 20000 25000"
	    }
	    "02"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack"        "30 60 90 120 160 190 210"
	    }
	    "03"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack_rate"        "10 15 20 25 30 35 40"
	    }
	    "04"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "slow_rate"        "-15 -20 -25 -35 -40 -45 -50"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/tower.lua"
	      "Function"        "UpgradeIce"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_attack_speed"
	    {
	      "Passive"  "0"
	      "IsHidden" "1"
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"    "%attack_rate"
	      }
	    }
	    "modifier_skadi"
	    {
	      "Passive"       "0"
	      "IsHidden"        "1"
	      
	      "Orb"
	      {
	        "Priority"        "DOTA_ORB_PRIORITY_ITEM"
	        "Label"         "DOTA_ORB_LABEL_SKADI"
	        "ProjectileName"    "particles/items2_fx/skadi_projectile.vpcf"
	        "CastAttack"      "0"
	      }
	
	      "OnOrbImpact"
	      {
	        "RunScript"
	        {
	          "ScriptFile"      "units/tower.lua"
	          "Function"        "IceTowerOnOrbImpact"
	          "ColdDuration"   "4"
	        }
	      }
	    }
	    "modifier_skadi_cold_attack"
	    {
	      "Passive"       "0"
	      "IsDebuff"      "1"
	      "IsHidden"        "0"
	      
	      "StatusEffectName"     "particles/status_fx/status_effect_frost.vpcf"
	      "StatusEffectPriority" "10"
	        
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"    "%slow_rate"
	        "MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE"    "%slow_rate"
	      }
	    } 
	  }
	}
	
	"petri_upgrade_death_tower"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_death_tower"
	
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "MaxLevel"            "8"
	
	  "AbilityChannelTime"      "3.0 3.1 3.2 3.3 3.4 3.5 3.6"
	  "AbilityGoldCost"       "1 5 10 15 20 25 30"
	
	  "precache"
	  {
	    "particle"  "particles/items_fx/desolator_projectile.vpcf"
	    "particle"  "particles/status_fx/status_effect_armor_dazzle.vpcf"
	  }
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"                "FIELD_INTEGER"
	      "lumber_cost"             "3000 8000 15000 20000 30000 40000 60000"
	    }
	    "02"
	    {
	      "var_type"                "FIELD_INTEGER"
	      "attack"                  "50 75 100 175 215 265 365"
	    }
	    "03"
	    {
	      "var_type"                "FIELD_INTEGER"
	      "attack_rate"             "0 0 0 0 0 0 0"
	    }
	    "04"
	    {
	      "var_type"                "FIELD_INTEGER"
	      "armor_reduction"         "-75"
	    }
	    "05"
	    {
	      "var_type"                "FIELD_INTEGER"
	      "armor_reduction_stacks"  "1 3 6 9 14 18 22"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/tower.lua"
	      "Function"        "UpgradeDeath"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_attack_speed"
	    {
	      "Passive"  "0"
	      "IsHidden" "1"
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"    "%attack_rate"
	      }
	    }
	    "modifier_death_tower"
	    {
	      "Passive"     "0"
	      "IsHidden"      "1"
	      
	      "Orb"
	      {
	        "Priority"        "DOTA_ORB_PRIORITY_ITEM"
	        "ProjectileName"    "particles/items_fx/desolator_projectile.vpcf"
	        "CastAttack"      "0"
	      }
	
	      "OnOrbImpact"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/tower.lua"
	          "Function"    "DeathTowerOnOrbImpact"
	        }
	        
	        "FireSound"
	        {
	          "EffectName"    "Item_Desolator.Target"
	          "Target"      "TARGET"
	        }
	      }
	    }
	    "modifier_death_tower_corruption"
	    {
	      "Passive"       "0"
	      "IsHidden"        "0"
	      "IsDebuff"  "1"
	
	      "Attributes"    "MODIFIER_ATTRIBUTE_MULTIPLE"
	
	      "StatusEffectName"     "particles/status_fx/status_effect_armor_dazzle.vpcf"
	      "StatusEffectPriority" "9"
	      
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_PHYSICAL_ARMOR_BONUS"    "%armor_reduction"
	      }
	    }
	  }
	}
	"petri_upgrade_concrete"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_concrete"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityGoldCost"       "50 100 125 150 175 200 250 500 750 800 900 1100 1700 2500"
	  "AbilityChannelTime"      "2.6 2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6 3.7 3.8 3.9"
	
	  "MaxLevel"            "15"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "2500 5000 8500 11500 16000 21000 27500 36000 50000 75000 100000 120000 150000 190000"
	    }
	
	    "02"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "bonus_armor"  "45 90 180 270 360 450 660 1100 1500 1900 2300 2700 3200 4000"
	    }
	    "03"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "aura_range"  "5000"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	      "Permanent"       "1"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	      "Permanent"       "1"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "ApplyModifier"
	    {
	      "ModifierName"  "modifier_concrete_aura"
	      "Target"     "CASTER"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	      "Permanent"       "1"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_concrete_aura"
	    {
	      "IsHidden"        "1"
	      
	      "ThinkInterval"  "0.5"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/lab.lua"
	          "Function"    "ApplyArmorAura"
	        }
	      }
	    }
	    "modifier_concrete"
	    {
	      "Passive"  "1"
	      "IsHidden" "1"
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_PHYSICAL_ARMOR_BONUS"    "1"
	      }
	    }
	  }
	}
	"petri_upgrade_earplugs"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_earplugs"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityGoldCost"       "50 75 100 125 175 250 420"
	  "AbilityChannelTime"      "2.5 2.6 2.7 2.8 2.9 3.0 3.1"
	
	  "MaxLevel"            "8"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "bonus_hp"  "4"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	      "Permanent"       "1"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	      "Permanent"       "1"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/lab.lua"
	      "Function"        "EarplugUpgrade"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	      "Permanent"       "1"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_earplugs"
	    {
	      "Passive"         "0"
	      "IsHidden"        "1"
	
	      "Attributes"    "MODIFIER_ATTRIBUTE_MULTIPLE"
	      
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_HEALTH_BONUS" "%bonus_hp"
	      }
	    }
	  }
	}
	"petri_upgrade_gold_tower"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_gold_tower"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	  
	  "AbilityGoldCost"       "5 10 15 30 35 45 55 75"
	
	  "AbilityManaCost"       "0"
	  
	  "AbilityChannelTime"      "1.0"
	  "AbilityUpgradeGoldCost"    "0"
	
	  "AbilityMultiOrder" "1"
	
	  "MaxLevel"            "9"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "food_cost"        "0 2 3 3 3 3 3 4"
	    }
	    "02"
	    { 
	      "var_type"  "FIELD_INTEGER"
	      "lumber_cost" "1250 2500 5000 7500 10000 15000 20000 25000"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/gold_tower.lua"
	      "Function"        "Upgrade"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	}
	"petri_upgrade_lumber"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "holdout_culling_blade"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityGoldCost"       "50 100 175 275 400"
	  "AbilityChannelTime"      "2.8 2.9 3.0 3.1 3.2"
	
	  "MaxLevel"            "6"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "bonus_lumber"  "10 20 40 60 80"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	      "Permanent"       "1"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	      "Permanent"       "1"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/lab.lua"
	      "Function"        "LumberUpgrade"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	      "Permanent"       "1"
	    }
	  }
	}
	"petri_upgrade_sawmill"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "shredder_whirling_death"
	
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "MaxLevel"            "3"
	
	  "AbilityChannelTime"      "4.0 5.0"
	  "AbilityGoldCost"       "0 10"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "1000 15000"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/sawmill.lua"
	      "Function"        "Upgrade"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	}
	"petri_upgrade_tent"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "build_petri_tent"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityManaCost"       "0"
	  "AbilityGoldCost"       "0"
	  "AbilityChannelTime"      "2.5"
	  "AbilityUpgradeGoldCost"    "0"
	
	  "MaxLevel"            "4"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "50 100 250"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/food_building.lua"
	      "Function"        "Upgrade"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	}
	"petri_upgrade_tower_damage"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "holdout_focusfire"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "AbilityGoldCost"       "80 100 110 130 150 170 190 350 450 650 850 1000"
	  "AbilityChannelTime"      "2.5 2.6 2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6"
	
	  "MaxLevel"            "13"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "1000 2000 4000 8000 12000 16000 21000 30500 40000 50000 75000 10000"
	    }
	
	    "02"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "bonus_damage"  "10 20 45 90 120 155 195 275 385 450 550 650"
	    }
	
	    "03"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "bonus_range"  "5 10 20 30 40 50 60 70 80 90 100 110"
	    }
	
	   "04"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "aura_range"  "5000"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	      "Permanent"       "1"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	      "Permanent"       "1"
	    }
	  }
	  
	  "OnChannelSucceeded"
	  {
	    "ApplyModifier"
	    {
	      "ModifierName"  "modifier_damage_aura"
	      "Target"     "CASTER"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	      "Permanent"       "1"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_damage_aura"
	    {
	      "IsHidden"        "1"
	
	      "ThinkInterval"  "0.5"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/lab.lua"
	          "Function"    "ApplyDamageAura"
	        }
	      }
	    }
	    "modifier_damage"
	    {
	      "Passive"  "0"
	      "IsHidden" "1"
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_PREATTACK_BONUS_DAMAGE"    "1"
	      }
	    }
	    "modifier_range"
	    {
	      "Passive"  "0"
	      "IsHidden" "1"
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_ATTACK_RANGE_BONUS" "1"
	      }
	    }
	  }
	}
	"petri_upgrade_tower_of_evil"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_tower_of_evil"
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	  
	  "AbilityGoldCost"       "1000 2000 3000 4000"
	
	  "AbilityManaCost"       "0"
	  
	  "AbilityChannelTime"      "1.0"
	  "AbilityUpgradeGoldCost"    "0"
	
	  "MaxLevel"            "4"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "35000 70000 140000 200000"
	    }
	    "02"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack"        "1350 2425 4250 5900"
	    }
	    "03"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "attack_rate"        "80 120 160 200"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/tower_of_evil.lua"
	      "Function"        "Upgrade"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_attack_speed"
	    {
	      "Passive"  "0"
	      "IsHidden" "1"
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"    "%attack_rate"
	      }
	    }
	  }
	}
	"petri_upgrade_wall"
	{
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_CHANNELLED | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
	  "BaseClass"           "ability_datadriven"
	  "AbilityTextureName"      "petri_upgrade_wall"
	
	  "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
	
	  "AbilityCastPoint"        "0.0"
	
	  "MaxLevel"            "10"
	
	  "AbilityChannelTime"      "4.0 6.0 7.0 10.0 15.0 20.0 30.0 50.0 80.0"
	  "AbilityGoldCost"       "0 10 60 270 550 900 1500 3200 5750"
	
	  "AbilitySpecial"
	  {
	    "01"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "lumber_cost"        "500 1000 4000 8000 12000 16000 20000 24000 26000"
	    }
	    "02"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "health_points"        "270 380 590 800 1100 1450 2400 4400 6050"
	    }
	    "03"
	    {
	      "var_type"          "FIELD_INTEGER"
	      "armor"        "125 350 875 1300 1700 2200 4000 6000 8000"
	    }
	  }
	
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StartUpgrading"
	    }
	  }
	
	  "OnChannelInterrupted"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "StopUpgrading"
	    }
	  }
	
	  "OnChannelSucceeded"
	  {
	    "RunScript"
	    {
	      "ScriptFile"      "units/wall.lua"
	      "Function"        "Upgrade"
	    }
	    "RunScript"
	    {
	      "ScriptFile"      "internal/util.lua"
	      "Function"        "OnUpgradeSucceeded"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_wall_notification"
	    {
	      "Passive"      "1"
	      "IsHidden"      "1"
	
	      "OnAttacked"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/wall.lua"
	          "Function"    "Notification"
	        }
	      }
	    }
	    "modifier_armor"
	    {
	      "IsPassive"  "1"
	      "IsHidden" "1"
	
	      "Properties"
	      {
	        "MODIFIER_PROPERTY_PHYSICAL_ARMOR_BONUS"    "1"
	      }
	    }
	  }
	}
	"return_resources"
	{
	  "BaseClass"                 "ability_datadriven"
	  "AbilityTextureName"      "return_resources"
	  "MaxLevel"            "1"
	
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_HIDDEN" //Fake Toggle
	
	  "OnSpellStart"
	  {
	    "ApplyModifier"
	    {
	      "ModifierName"  "modifier_returning_resources"
	      "Target"    "CASTER"
	    }
	
	    "RunScript"
	    {
	      "ScriptFile"  "units/peasant.lua"
	      "Function"    "ReturnResources"
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_returning_resources"
	    {
	      "IsHidden"        "0"
	      "TextureName"     "furion_sprout"
	
	      "ThinkInterval"  "0.03"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "CheckBuildingPosition"
	        }
	      }
	
	      "OnOrder"
	      {
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "ToggleOffGather"
	        }
	
	        "RunScript"
	        {
	          "ScriptFile"  "units/peasant.lua"
	          "Function"    "ToggleOffReturn"
	        }
	      }   
	    }
	  }
	} 
	"train_petri_peasant"
	{
	  "BaseClass"                 "ability_datadriven"
	  "AbilityTextureName"      "train_petri_peasant"
	  "MaxLevel"            "1"
	
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_AUTOCAST | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL"
	
	  "AbilityGoldCost"       "6"
	  "AbilityChannelTime"      "4"
	  "AbilityUpgradeGoldCost"    "0"
	
	  "AbilitySpecial"
	  {
	    "01"
	    { 
	        "var_type"  "FIELD_INTEGER"
	        "food_cost" "20"
	    }
	  }
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"  "buildings/queue.lua"
	      "Function"    "EnqueueUnit"
	      "food" "%food_cost"
	    }
	  }
	
	  "OnChannelSucceeded"
	  {
	    // Consume the first item in the queue
	    "RunScript"
	    {
	      "ScriptFile"    "buildings/queue.lua"
	      "Function"      "NextQueue"
	    }
	
	    "SpawnUnit"
	    {
	      "UnitName"    "npc_petri_peasant"
	
	      "UnitCount"   "1"
	      "UnitLimit"   "0"
	      "GrantsGold"  "1"
	      "GrantsXP"    "1"
	      "SpawnRadius" "10"
	      "OnSpawn"
	      {
	        "ApplyModifier"
	        {
	          "ModifierName"  "modifier_phased"
	          "Target"    "TARGET"
	          "Duration"    "0.03"
	        }
	
	        "RunScript"
	        {
	          "ScriptFile"    "buildings/queue.lua"
	          "Function"      "SetOwner"
	          "food" "%food_cost"
	        }
	      }
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_building_autocast"
	    {
	      "Passive"     "1"
	      "IsHidden"      "1"
	      "Attributes"    "MODIFIER_ATTRIBUTE_MULTIPLE"
	    
	      "ThinkInterval"   "0.03"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "buildings/autocast.lua"
	          "Function"      "BuildingAutocast"
	        }
	      }
	    }
	  }
	}
	"train_petri_super_peasant"
	{
	  "BaseClass"                 "ability_datadriven"
	  "AbilityTextureName"      "train_petri_super_peasant"
	  "MaxLevel"            "1"
	
	  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_AUTOCAST | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL"
	
	  "AbilityGoldCost"       "40"
	  "AbilityChannelTime"      "4"
	  "AbilityUpgradeGoldCost"    "0"
	
	  "AbilitySpecial"
	  {
	    "01"
	    { 
	        "var_type"  "FIELD_INTEGER"
	        "food_cost" "5"
	    }
	  }
	  
	  "OnSpellStart"
	  {
	    "RunScript"
	    {
	      "ScriptFile"  "buildings/queue.lua"
	      "Function"    "EnqueueUnit"
	      "food" "%food_cost"
	    }
	  }
	
	  "OnChannelSucceeded"
	  {
	    // Consume the first item in the queue
	    "RunScript"
	    {
	      "ScriptFile"    "buildings/queue.lua"
	      "Function"      "NextQueue"
	    }
	
	    "SpawnUnit"
	    {
	      "UnitName"    "npc_petri_super_peasant"
	
	      "UnitCount"   "1"
	      "UnitLimit"   "0"
	      "GrantsGold"  "1"
	      "GrantsXP"    "1"
	      "SpawnRadius" "10"
	      "OnSpawn"
	      {
	        "ApplyModifier"
	        {
	          "ModifierName"  "modifier_phased"
	          "Target"    "TARGET"
	          "Duration"    "0.03"
	        }
	
	        "RunScript"
	        {
	          "ScriptFile"    "buildings/queue.lua"
	          "Function"      "SetOwner"
	          "food" "%food_cost"
	        }
	      }
	    }
	  }
	
	  "Modifiers"
	  {
	    "modifier_building_autocast"
	    {
	      "Passive"     "1"
	      "IsHidden"      "1"
	      "Attributes"    "MODIFIER_ATTRIBUTE_MULTIPLE"
	    
	      "ThinkInterval"   "0.03"
	      "OnIntervalThink"
	      {
	        "RunScript"
	        {
	          "ScriptFile"    "buildings/autocast.lua"
	          "Function"      "BuildingAutocast"
	        }
	      }
	    }
	  }
	}
}