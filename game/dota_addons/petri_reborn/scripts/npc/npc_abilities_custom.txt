
// Dota Abilities Override File
"DOTAAbilities"
{
  "Version"   "1"

  "build_dark_tower"
  {
    "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
    "BaseClass"           "ability_datadriven"
    "AbilityTextureName"      "sniper_take_aim"
    "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
    // BuildingHelper info
    "Building"            "1" //bool
    "BuildingSize"          "3" // this is (3x64) by (3x64) units, so 9 squares.
    "BuildTime"           "2.0"
    "AbilityCastRange"        "100"
    "UpdateHealth"          "1" //bool
    "Scale"             "1" //bool
    "MaxScale"            "1.3"
    "PlayerCanControl"        "1" //bool. Should the player issuing this build command be able to control the building once built?
    //"CancelsBuildingGhost"      "0" //bool
    // Note: if unit uses a npc_dota_hero baseclass, you must use the npc_dota_hero name.
    "UnitName"            "npc_dota_hero_enigma"
    "AbilityCooldown"       "0"
    "AbilityGoldCost"       "10"
    // End of BuildingHelper info

    "AbilityCastPoint"        "0.0"
    "MaxLevel"            "1"

    // Item Info
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"       "0"
    
    "OnSpellStart"
    {
      "RunScript"
      {
        "ScriptFile"      "scripts/vscripts/abilities.lua"
        "Function"        "build"
      }
    }
  }
  
//-------------------
// Dummy stuff
//-------------------
  
  "occupy_area"
  {
    "AbilityBehavior"     "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
    "AbilityUnitTargetTeam" "DOTA_UNIT_TARGET_TEAM_FRIENDLY"
    "AbilityUnitTargetType" "DOTA_UNIT_TARGET_ALL"

    "BaseClass"           "ability_datadriven"
    "AbilityTextureName"            "backdoor_protection"
    "MaxLevel"                      "1"

    "OnSpellStart"
    {
      "RunScript"
      {
        "ScriptFile"  "scripts/vscripts/abilities/occupy_area.lua"
        "Function"    "OccupyArea"
      }
    }
  }

  "give_permission_to_build"
  {
    "AbilityBehavior"     "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
    "BaseClass"           "ability_datadriven"
    "AbilityTextureName"            "backdoor_protection"
    "MaxLevel"                      "1"
  }
  
  "builder_blink_datadriven"
  {
    "BaseClass"       "ability_datadriven"
    "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT | DOTA_ABILITY_BEHAVIOR_ROOT_DISABLES | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"
    "AbilityTextureName"      "antimage_blink"

    "MaxLevel"               "1"

    "precache"
    {
      "soundfile"   "soundevents/game_sounds_heroes/game_sounds_antimage.vsndevts"
    }

    "AbilityCastPoint"        "0.4"

    "AbilityCooldown"       "5.0"
    
    "AbilityManaCost"       "0"
    
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"        "FIELD_INTEGER"
        "blink_range"     "2150"
      }
      
      "02"
      {
        "var_type"        "FIELD_INTEGER"
        "min_blink_range"   "200"
      }
    }

    "OnSpellStart"
    {
      "RunScript"
      {
        "ScriptFile"  "scripts/vscripts/abilities/blink.lua"
        "Function"    "Blink"
        "Target"    "POINT"
      }

      "FireSound"
      {
        "EffectName"  "Hero_Antimage.Blink_out"
        "Target"    "CASTER"
      }

      "FireSound"
      {
        "EffectName"  "Hero_Antimage.Blink_in"
        "Target"    "CASTER"
      }
    }
  }

  // START OF BUILDING HELPER ABILITIES
  "has_build_queue"
  {
    "AbilityBehavior" "DOTA_ABILITY_BEHAVIOR_PASSIVE"
    "BaseClass" "ability_datadriven"

    "Modifiers"
    {
      "modifier_has_build_queue"
      {
        "Passive" "1"
        "IsHidden"  "1"
        "OnOrder"
        {
          "RunScript"
          {
            "ScriptFile"  "scripts/vscripts/abilities.lua"
            "Function"    "builder_queue"
          }
        }
      }
    }
  }

  "move_to_point_70"
  {
    "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
    "BaseClass"           "ability_datadriven"
    "AbilityCastPoint"        "0"
    "AbilityCooldown"       "0"
    "AbilityCastRange"        "70"
    "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
    "MaxLevel"            "1"

    "AbilityManaCost"       "0"

    "OnSpellStart"
    {
      "RunScript"
      {
        "Target"    "POINT"
        "ScriptFile"  "scripts/vscripts/abilities.lua"
        "Function"    "create_building_entity"
      }
    }
  }

  "move_to_point_100"
  {
    "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
    "BaseClass"           "ability_datadriven"
    "AbilityCastPoint"        "0"
    "AbilityCooldown"       "0"
    "AbilityCastRange"        "100"
    "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
    "MaxLevel"            "1"

    "AbilityManaCost"       "0"

    "OnSpellStart"
    {
      "RunScript"
      {
        "Target"    "POINT"
        "ScriptFile"  "scripts/vscripts/abilities.lua"
        "Function"    "create_building_entity"
      }
    }
  }

  "move_to_point_150"
  {
    "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
    "BaseClass"           "ability_datadriven"
    "AbilityCastPoint"        "0"
    "AbilityCooldown"       "0"
    "AbilityCastRange"        "150"
    "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
    "MaxLevel"            "1"

    "AbilityManaCost"       "0"

    "OnSpellStart"
    {
      "RunScript"
      {
        "Target"    "POINT"
        "ScriptFile"  "scripts/vscripts/abilities.lua"
        "Function"    "create_building_entity"
      }
    }
  }

  "move_to_point_200"
  {
    "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
    "BaseClass"           "ability_datadriven"
    "AbilityCastPoint"        "0"
    "AbilityCooldown"       "0"
    "AbilityCastRange"        "200"
    "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
    "MaxLevel"            "1"

    "AbilityManaCost"       "0"

    "OnSpellStart"
    {
      "RunScript"
      {
        "Target"    "POINT"
        "ScriptFile"  "scripts/vscripts/abilities.lua"
        "Function"    "create_building_entity"
      }
    }
  }

  "move_to_point_250"
  {
    "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
    "BaseClass"           "ability_datadriven"
    "AbilityCastPoint"        "0"
    "AbilityCooldown"       "0"
    "AbilityCastRange"        "250"
    "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
    "MaxLevel"            "1"

    "AbilityManaCost"       "0"

    "OnSpellStart"
    {
      "RunScript"
      {
        "Target"    "POINT"
        "ScriptFile"  "scripts/vscripts/abilities.lua"
        "Function"    "create_building_entity"
      }
    }
  }

  "move_to_point_300"
  {
    "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_POINT"
    "BaseClass"           "ability_datadriven"
    "AbilityCastPoint"        "0"
    "AbilityCooldown"       "0"
    "AbilityCastRange"        "300"
    "AbilityCastAnimation"      "ACT_DOTA_DISABLED"
    "MaxLevel"            "1"

    "AbilityManaCost"       "0"

    "OnSpellStart"
    {
      "RunScript"
      {
        "Target"    "POINT"
        "ScriptFile"  "scripts/vscripts/abilities.lua"
        "Function"    "create_building_entity"
      }
    }
  }

  "bh_dummy"
  {
    "AbilityBehavior"     "DOTA_ABILITY_BEHAVIOR_PASSIVE"
    "BaseClass"           "ability_datadriven"
    "AbilityTextureName"            "rubick_empty1"
    "MaxLevel"                      "1"

    "Modifiers"
    {
      "dummy_unit"
      {
        "Passive"                        "1"
        "IsHidden"                       "1"    
        "States"
        {
          "MODIFIER_STATE_UNSELECTABLE"   "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NO_HEALTH_BAR"    "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_INVULNERABLE"   "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NOT_ON_MINIMAP"   "MODIFIER_STATE_VALUE_ENABLED"
        }
      }

      "building_canceled"
      {
        "Passive"                        "0"
        "IsHidden"                       "1"
        "OnOrder"
        // Triggers on Move/Casting/Hold/Stop
        {
          "RunScript"
          {
            "ScriptFile"  "scripts/vscripts/abilities.lua"
            "Function"    "building_canceled"
          }
        }

      } 
    }
  }

  // END OF BUILDING HELPER ABILITIES
}